
# 多线程VS多进程
> 多进程和多线程大概有以下优点  
> 多线程： 1.内存的开销小  2.线程间切换快  3.可以共享数据  
> 多进程:  1. 运行速度快   2.独立性  3.扩展方便  
> 但分别是什么时候最适合多线程？ 什么时候最适合多进程呢？  
  

|机器           |版本                               |
|---            |---                                |
|       CPU     | Intel Core i7-3630QM (4核8线程)   |
|SYSTEM         |Linux 16.04                        |
|gcc            |5.4.0                              |
|Python         |2.7.12                             |

### python
> 刚开始想用python来测试多进程和多线程的优缺点的,写完代码发现不对，才想起python的全局解释器锁(GIL)的问题。所以只能测试一下多进程的速度了。  

用法: `./run.sh`

结果:  
4进程最快,第二是40进程,第三是8进程。  
因为我的CPU是4核的，所以4进程应该是最快的。但是第二竟然是40进程。我的理解是进程越多,需要不断的切换进程，会消耗时间，而8进程切换的次数少,应该更快。

|任务数|进程数|时间(s)|
|---|---|---|
| 40 | 1 | 9.51
| 40 | 2 | 4.47
| 40 | 3 | 3.57
| 40 | 4 | 2.58
| 40 | 5 | 3.06
| 40 | 6 | 2.82
| 40 | 7 | 2.92
| 40 | 8 | 2.65
| 40 | 9 | 2.83
| 40 | 40| 2.62



### c 
> 分别测试了多进程和多线程的速度,执行6*10^10次乘法和加法
结果:  
4进程是进程中最快的,比4线程快，但是速度却低于8线程。
可能原因是CPU超线程技术的特性导致的。

|方式 |时间(s)|
|---|---|
|4进程|62|
|4线程|65|
|8进程|67
|8线程|54|
|16进程|67
|16线程|56|



